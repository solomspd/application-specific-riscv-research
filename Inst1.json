[
  {
    "instruction": "LUI",
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "pc",
            "port": "pc_out",
            "modifier": "%c+4"
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "dest",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rd]"
          },
          {
            "name": "reg_write",
            "length": 1,
            "module": "control_unit",
            "port": "reg_write",
            "modifier": null
          },
          {
            "name": "write_data",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          }
        ],
        "output": []
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          {
            "name": "reg_write",
            "length": 1
          }
        ]
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      }
    ]
  },
  {
    "instruction": "AUIPC",
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "pc",
            "port": "pc_out",
            "modifier": "%c+4"
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "dest",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rd]"
          },
          {
            "name": "reg_write",
            "length": 1,
            "module": "control_unit",
            "port": "reg_write",
            "modifier": null
          },
          {
            "name": "write_data",
            "length": 32,
            "module": "alu",
            "port": "out",
            "modifier": null
          }
        ],
        "output": []
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          {
            "name": "reg_write",
            "length": 1
          },
          {
            "name": "aluop",
            "length": 2
          }
        ]
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu",
        "input": [
          {
            "name": "a",
            "length": 32,
            "form module": "pc",
            "port": "pc_out",
            "modifier": null
          },
          {
            "name": "b",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          },
          {
            "name": "alufn",
            "length": 4,
            "module": "alu_ctrl",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu_ctrl",
        "input": [
          {
            "name": "aluop",
            "length": 2,
            "module": "control_unit",
            "port": "aluop",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "alufn",
            "length": 4
          }
        ]
      }
    ]
  },
  {
    "instruction": "jal",
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "alu",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "dest",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rd]"
          },
          {
            "name": "reg_write",
            "length": 1,
            "module": "control_unit",
            "port": "reg_write",
            "modifier": null
          },
          {
            "name": "write_data",
            "length": 32,
            "module": "pc",
            "port": "pc_out",
            "modifier": "%c+4"
          }
        ],
        "output": []
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          {
            "name": "reg_write",
            "length": 1
          },
          {
            "name": "aluop",
            "length": 2
          }
        ]
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu",
        "input": [
          {
            "name": "a",
            "length": 32,
            "form module": "pc",
            "port": "pc_out",
            "modifier": null
          },
          {
            "name": "b",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          },
          {
            "name": "alufn",
            "length": 4,
            "module": "alu_ctrl",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu_ctrl",
        "input": [
          {
            "name": "aluop",
            "length": 2,
            "module": "control_unit",
            "port": "aluop",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "alufn",
            "length": 4
          }
        ]
      }
    ]
  },
  {
    "instruction": "jalr",
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "alu",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "dest",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rd]"
          },
          {
            "name": "reg_write",
            "length": 1,
            "module": "control_unit",
            "port": "reg_write",
            "modifier": null
          },
          {
            "name": "write_data",
            "length": 32,
            "module": "pc",
            "port": "pc_out",
            "modifier": "%c+4"
          }
        ],
        "output": [
          {
            "name": "read1",
            "length": 32
          }
        ]
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          {
            "name": "reg_write",
            "length": 1
          },
          {
            "name": "aluop",
            "length": 2
          }
        ]
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu",
        "input": [
          {
            "name": "a",
            "length": 32,
            "form module": "reg_file",
            "port": "read1",
            "modifier": null
          },
          {
            "name": "b",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          },
          {
            "name": "alufn",
            "length": 4,
            "module": "alu_ctrl",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu_ctrl",
        "input": [
          {
            "name": "aluop",
            "length": 2,
            "module": "control_unit",
            "port": "aluop",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "alufn",
            "length": 4
          }
        ]
      }
    ]
  },
  {
    "instruction": ["beq", "bne", "bge", "blt", "bgeu", "bltu"],
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "alu",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "src1",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rs1]"
          },
          {
            "name": "src2",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rs2]"
          }
        ],
        "output": [
          {
            "name": "read1",
            "length": 32
          },
          {
            "name": "read2",
            "length": 32
          }
        ]
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          {
            "name": "aluop",
            "length": 2
          },
          {
            "name": "branch",
            "length": 1
          }
        ]
      },
      {
        "module": "branch",
        "input": [
          {
            "name": "bin1",
            "length": 32,
            "module": "reg_file",
            "port": "read1",
            "modifier": null
          },
          {
            "name": "bin2",
            "length": 32,
            "module": "reg_file",
            "port": "read2",
            "modifier": null
          },
          {
            "name": "f3",
            "length": 3,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[IR_funct3]"
          },
          {
            "name": "branch",
            "length": 1,
            "module": "control_unit",
            "port": "branch",
            "modifier": null
          }
        ],
        "output": []
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu",
        "input": [
          {
            "name": "a",
            "length": 32,
            "form module": "pc",
            "port": "pc_out",
            "modifier": null
          },
          {
            "name": "b",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          },
          {
            "name": "alufn",
            "length": 4,
            "module": "alu_ctrl",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu_ctrl",
        "input": [
          {
            "name": "aluop",
            "length": 2,
            "module": "control_unit",
            "port": "aluop",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "alufn",
            "length": 4
          }
        ]
      }
    ]
  },
  {
    "instruction": ["LW", "LH", "LB", "LHU", "LBU"],
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "pc",
            "port": "pc_out",
            "modifier": "%c+4"
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "src1",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rs1]"
          },
          {
            "name": "dest",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rd]"
          },
          {
            "name": "reg_write",
            "length": 1,
            "module": "control_unit",
            "port": "reg_write",
            "modifier": null
          },
          {
            "name": "memtoreg",
            "length": 1,
            "module": "control_unit",
            "port": "memtoreg",
            "modifier": null
          },
          {
            "name": "write_data",
            "length": 32,
            "module": "data_mem",
            "port": "data_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "read1",
            "length": 32
          }
        ]
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          { "name": "reg_write", "length": 1 },
          { "name": "mem_read", "length": 1 },
          { "name": "aluop", "length": 2 },
          {
            "name": "memtoreg",
            "length": 1
          }
        ]
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu",
        "input": [
          {
            "name": "a",
            "length": 32,
            "form module": "reg_file",
            "port": "read1",
            "modifier": null
          },
          {
            "name": "b",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          },
          {
            "name": "alufn",
            "length": 4,
            "module": "alu_ctrl",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "out",
            "length": 32
          }
        ]
      },
      {
        "module": "data_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "alu",
            "port": "out",
            "modifier": null
          },
          {
            "name": "func3",
            "length": 3,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%C[`IR_funct3]"
          },
          {
            "name": "mem_read",
            "length": 1,
            "module": "control_unit",
            "port": "mem_read",
            "modifier": "%C[`IR_funct3]"
          }
        ],
        "output": [
          {
            "name": "data_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu_ctrl",
        "input": [
          {
            "name": "aluop",
            "length": 2,
            "module": "control_unit",
            "port": "aluop",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "alufn",
            "length": 4
          }
        ]
      }
    ]
  },
  {
    "instruction": ["SW", "SH", "SB"],
    "modules": [
      {
        "module": "pc",
        "input": [
          {
            "name": "pc_in",
            "length": 32,
            "module": "pc",
            "port": "pc_out",
            "modifier": "%c+4"
          }
        ],
        "output": [
          {
            "name": "pc_out",
            "length": 32
          }
        ]
      },
      {
        "module": "inst_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "pc",
            "port": "pc_out"
          }
        ],
        "output": [
          {
            "name": "inst_out",
            "length": 32
          }
        ]
      },
      {
        "module": "reg_file",
        "input": [
          {
            "name": "src1",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rs1]"
          },
          {
            "name": "src2",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rs2]"
          },
          {
            "name": "dest",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_rd]"
          }
        ],
        "output": [
          {
            "name": "read1",
            "length": 32
          }
        ]
      },
      {
        "module": "control_unit",
        "input": [
          {
            "name": "op",
            "length": 5,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%c[`IR_opcode]"
          }
        ],
        "output": [
          {
            "name": "mem_write",
            "length": 1
          },
          {
            "name": "aluop",
            "length": 2
          }
        ]
      },
      {
        "module": "imm_gen",
        "input": [
          {
            "name": "inst",
            "length": 32,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "imm_out",
            "length": 32
          }
        ]
      },
      {
        "module": "alu",
        "input": [
          {
            "name": "a",
            "length": 32,
            "form module": "reg_file",
            "port": "read1",
            "modifier": null
          },
          {
            "name": "b",
            "length": 32,
            "module": "imm_gen",
            "port": "imm_out",
            "modifier": null
          },
          {
            "name": "alufn",
            "length": 4,
            "module": "alu_ctrl",
            "port": "out",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "out",
            "length": 32
          }
        ]
      },
      {
        "module": "data_mem",
        "input": [
          {
            "name": "addr",
            "length": 32,
            "module": "alu",
            "port": "out",
            "modifier": null
          },
          {
            "name": "func3",
            "length": 3,
            "module": "inst_mem",
            "port": "inst_out",
            "modifier": "%C[`IR_funct3]"
          },
          {
            "name": "write_data",
            "length": 32,
            "module": "reg_file",
            "port": "read2",
            "modifier": null
          },
          {
            "name": "mem_write",
            "length": 1,
            "module": "control_unit",
            "port": "mem_write",
            "modifier": null
          }
        ],
        "output": []
      },
      {
        "module": "alu_ctrl",
        "input": [
          {
            "name": "aluop",
            "length": 2,
            "module": "control_unit",
            "port": "aluop",
            "modifier": null
          }
        ],
        "output": [
          {
            "name": "alufn",
            "length": 4
          }
        ]
      }
    ]
  }
]
